<div class="container p-4">
  <button mat-raised-button color="primary" (click)="createProject()">
    افزودن
  </button>
  <p class="inline-block mr-4" *ngIf="customerId">
    پروژه های {{ firstName }} {{ lastName }}
  </p>

  <table
    mat-table
    [dataSource]="dataSource"
    class="mat-elevation-z8 demo-table mt-3"
  >
    <div *ngIf="!showtable">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>نام پروژه</th>
        <td mat-cell *matCellDef="let element">
          پروژه ای برای {{ firstName }} {{ lastName }} وجود ندارد.
        </td>
      </ng-container>
    </div>
    <div *ngIf="showtable">
      <!-- isClosed Column -->
      <ng-container matColumnDef="isClosed">
        <th mat-header-cell *matHeaderCellDef>بسته شده</th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox
            class="my-component"
            [disabled]="disabled"
            [checked]="row.isClosed"
            color="primary"
          >
          </mat-checkbox>
        </td>
      </ng-container>

      <!-- title Column -->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>نام پروژه</th>
        <td mat-cell *matCellDef="let element">{{ element.title }}</td>
      </ng-container>

      <!-- location Column -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef>موقعیت</th>
        <td mat-cell *matCellDef="let element">{{ element.location }}</td>
      </ng-container>

      <!-- startDate Column -->
      <ng-container matColumnDef="startDate">
        <th mat-header-cell *matHeaderCellDef>تاریخ شروع پروژه</th>
        <td mat-cell *matCellDef="let element">
          {{ element.startedAt | persianDate }}
        </td>
      </ng-container>

      <!-- selectedFile Column -->
      <ng-container matColumnDef="selectedFile">
        <th mat-header-cell *matHeaderCellDef>فایلهای انتخاب شده</th>
        <td mat-cell *matCellDef="let element">
          <!-- {{ element.startedAt | persianDate }} -->
          چندتا
        </td>
      </ng-container>

      <!-- action Column -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>عملیات</th>

        <td mat-cell *matCellDef="let row">
          <button
            mat-icon-button
            [matMenuTriggerFor]="menu"
            aria-label="Example icon-button with a menu"
          >
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="onClickManageFiles(row)">
              <mat-icon>photo_library</mat-icon>
              <span>مدیرت فایل ها</span>
            </button>
            <button mat-menu-item (click)="onClickEdit(row)">
              <mat-icon>edit</mat-icon>
              <span>ویرایش</span>
            </button>
            <button mat-menu-item (click)="onClickDelete(row)">
              <mat-icon color="warn">delete</mat-icon>
              <span>حذف</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>
    </div>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
